<%= provide :main_menu do %>
  <nav >
    <div class=" flex hidden md:block md:py-4  mx-auto max-w-7xl px-4  lg:px-8">
      <%= image_tag( "title.png", :alt => "title") %>
    </div>
    <!--меню -->

    <div class="   justify-between mx-auto max-w-7xl px-4 sm:px-4 lg:px-6 backdrop-opacity-10 rounded-lg  bg-white/30  ">
      <div class=" hidden md:flex md:h-10  justify-between">

        <% if user_signed_in? %>
          <div class="ml-10 w-full flex  items-center   space-x-4 ">
            <%= link_nav "Главная страница",root_path,class:' border-l-2 border-grey-200 hover:bg-gray-100 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
          </div>
            <% if current_user.verificate  %>
              <div class="flex  ">


                <div class="ml-10 flex  items-center   space-x-4 ">
                  <%= link_nav "Пункт меню","#",class:' border-l-2 border-grey-200 hover:bg-gray-100 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
                </div>
                <div class="ml-10 flex  items-center   space-x-4 ">
                  <%= link_nav "Голосования",polls_path,class:' border-l-2 border-grey-200 hover:bg-gray-100 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
                </div>
              </div>
          </div>
          <%else %>
           <div class="w-full flex  justify-center ">
                <p> Пользователь не верифицирован </p>
          </div>
          <%end %><!--левая часть меню -->


          <div class=" hidden md:block">
            <div class="ml-4 flex items-center md:ml-6">

              <!-- Profile dropdown    -->


              <div data-controller="menu"  class="  relative ml-3">
                <div>
                  <button  data-action="menu#toggleDropdown" type="button"
                           class="border-l-2 border-grey-200 hover:bg-gray-100 block rounded-md px-3 py-2 text-base font-medium">
                    <%= current_user.email %>

                  </button>
                </div>

                <div data-menu-target="dropdown"  class=" hidden absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">
                  <!-- Active: "bg-gray-100", Not Active: "" -->

                  <%= link_to 'Управление аккаунтом',  edit_user_registration_path,
                              class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
                  <% if current_user.role =="admin" %>
                    <%= link_to 'Страница администратора',  "admin_index_path",
                                class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
                  <% end %>
                   <%if "current_user.areas.exists?" %>
                    <%= link_to 'Личный кабинет',   "user_path(current_user)",
                                class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
                  <%else%>
                    <%= link_to ' Создание Area',   "new_user_area_path(current_user)",
                                class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
                  <%end %>

                  <%= link_to 'Выйти', destroy_user_session_path, data: { turbo_method: :delete },
                              class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
                </div>
              </div>
        <% else %>
          <div class=" flex w-full justify-end ">
            <%= link_nav "Вход", new_user_session_path,class:'  border-l-2 border-grey-200 hover:text-gray-200 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
            <%= link_nav "Регистрация",new_user_registration_path,class:'  border-l-2 border-grey-200 hover:text-gray-200 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
          </div>
        <% end %>

        </div>
        </div><!--правая часть меню -->
    </div>
    <!--меню -->
    <!-- Mobile menu  -->
    <div  data-controller="mobil" class=" mt-2 md:hidden">
      <div class="flex my-2 mx-4 items-center justify-between">
        <div> <%= image_tag( "title.png", :alt => "title") %> </div>
        <button data-action="mobil#toggleMenu" type="button" class=" border-l-2 border-grey-200 hover:bg-gray-100  block rounded-md px-3 py-2 text-base font-medium" >
          MENU
        </button>
      </div>
      <div data-mobil-target="menu" class="hidden  md:hidden" >
        <div class="space-y-1 px-2 pb-3 pt-2 sm:px-3">
          <div class="flex  items-center   space-x-4 ">
            <%= link_nav "Главная страница",root_path,class:' border-l-2 border-grey-200 hover:bg-gray-100 block rounded-md px-3 py-2 text-base font-medium', link_page:link_page  %>
          </div>
        </div>
        <%= link_to 'Управление аккаунтом',  edit_user_registration_path,
                    class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
        <% if current_user.role =="admin" %>
          <%= link_to 'Страница администратора',  "admin_index_path",
                      class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
        <% end %>
        <%if "current_user.areas.exists?" %>
          <%= link_to 'Личный кабинет',   "user_path(current_user)",
                      class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
        <%else%>
          <%= link_to ' Создание Area',   "new_user_area_path(current_user)",
                      class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
        <%end %>

        <%= link_to 'Выйти', destroy_user_session_path, data: { turbo_method: :delete },
                    class: "block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white"%>
      </div>
    </div>



  </nav>
<%end %>